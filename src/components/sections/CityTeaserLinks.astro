---
const { title, groupSlug, subSlug, cityRegions } = Astro.props;
---

<section class="city-grid-section">
  <div class="container">
    <h2 class="text-center">{title} <span class="bg-accent text-white px-2 rounded-md">Near You</span></h2>
    <p class="section-subtitle text-center">
      We deploy local teams throughout Florida to guarantee fast and personalized service tailored to your city's regulations.
    </p>
    
    <div class="regions-container">
      {Object.entries(cityRegions).map(([regionName, cities]) => (
        <div class="region-block">
          <h3 class="region-title">{regionName}</h3>
          <div class="city-grid">
            {cities.slice(0, 5).map(city => (
              <a href={`/restoration/${groupSlug}/${subSlug}/${city.slug}`} class="city-card">
                <div class="city-name">{city.nombre}</div>
                <div class="city-county">{city.condado} County</div>
                <div class="city-cta">
                  <i class="fas fa-map-marker-alt"></i> Service Available â†’
                </div>
              </a>
            ))}
            {cities.length > 5 && (
              <div class="view-more">
                +{cities.length - 5} more cities available
              </div>
            )}
          </div>
        </div>
      ))}
    </div>

    <div class="emergency-notice">
      <h3>Emergency Response Available Statewide</h3>
      <p>Don't wait - property damage gets worse over time. Our certified technicians are standing by 24/7.</p>
      <a href="tel:+17866022217" class="emergency-phone">
        <i class="fas fa-phone-alt"></i> CALL NOW FOR FAST RESPONSE
      </a>
    </div>
  </div>
</section>