---
/**
 * Template unificado para todos los servicios de restoration
 * Reemplaza todos los templates espec√≠ficos con un sistema modular
 */
import RestoreHero from "../RestoreHero.jsx";
import RestoreProcess from "../RestoreProcess.jsx";
import RestoreServices from "../RestoreServices.jsx";
import RestoreWarnings from "../RestoreWarnings.jsx";
import RestoreFeatures from "../RestoreFeatures.jsx";
import RestoreFAQ from "../RestoreFAQ.jsx";
import RestorationCTA from "../../RestorationCTA.jsx";

const { group, sub } = Astro.props;

// VERIFICACI√ìN CR√çTICA: Asegurar que group y sub existen
if (!group || !sub) {
  console.error("UnifiedTemplate: Missing group or sub data", { group, sub });
  throw new Error("UnifiedTemplate requires both group and sub props");
}

// Usar datos directos sin enricher para evitar errores
const enrichedSub = sub;

// Configuraci√≥n del hero - USAR DATOS DIRECTOS
const heroConfig = {
  title: enrichedSub.hero?.title || `${sub.title || 'Restoration'} Services in Florida`,
  description: enrichedSub.hero?.description || sub.short || `Professional ${(sub.title || 'restoration').toLowerCase()} services in Florida.`,
  ctaText: enrichedSub.hero?.cta || "Get Help Now",
  ctaLink: "/contact",
  backgroundImage: `/images/hero${group.template || 'water'}.jpg`,
  badges: enrichedSub.hero?.iconRow || [
    { icon: "üö®", text: "24/7 Response" },
    { icon: "üõ°Ô∏è", text: "Licensed & Insured" },
    { icon: "‚≠ê", text: "10+ Years Florida" }
  ],
  showEmergencyBadge: (group.template || 'water') !== 'mitigation'
};

// Configuraci√≥n del proceso - DATOS EST√ÅTICOS SEGUROS
const processConfig = {
  title: "How We Help You",
  steps: [
    { title: "Assessment", text: "Complete evaluation of damage", icon: "fas fa-search" },
    { title: "Action", text: "Immediate response to prevent further damage", icon: "fas fa-bolt" },
    { title: "Restoration", text: "Professional repair and cleanup", icon: "fas fa-tools" },
    { title: "Prevention", text: "Protect against future issues", icon: "fas fa-shield-alt" }
  ],
  timeline: "Most inspections completed within 24-48 hours"
};

// Configuraci√≥n de servicios - DATOS EST√ÅTICOS
const servicesConfig = {
  title: "What's Included",
  services: [
    {
      icon: "‚ö°",
      title: "Emergency Response",
      description: "24/7 immediate response to your emergency",
      ctaText: "Learn More",
      ctaLink: "/contact"
    },
    {
      icon: "üîç",
      title: "Professional Assessment",
      description: "Complete evaluation and damage documentation",
      ctaText: "Learn More", 
      ctaLink: "/contact"
    },
    {
      icon: "üõ†Ô∏è",
      title: "Expert Restoration",
      description: "Professional repair and restoration services",
      ctaText: "Learn More",
      ctaLink: "/contact"
    }
  ],
  layout: "cards"
};

// Configuraci√≥n de advertencias - DATOS EST√ÅTICOS
const warningsConfig = {
  title: "Warning Signs You Need Help",
  warnings: [
    { icon: "‚ö†Ô∏è", text: "Visible damage or contamination" },
    { icon: "üè†", text: "Structural concerns or safety risks" },
    { icon: "üíß", text: "Moisture or water intrusion" },
    { icon: "ü§ß", text: "Health symptoms or air quality issues" }
  ],
  variant: "warning",
  urgencyMessage: "Don't wait - damage spreads quickly and costs increase over time"
};

// Configuraci√≥n de caracter√≠sticas - DATOS EST√ÅTICOS
const featuresConfig = {
  title: "Why Choose Us",
  features: [
    "24/7 emergency response across Florida",
    "Licensed and certified technicians", 
    "Advanced equipment and techniques",
    "Direct insurance billing available",
    "Comprehensive warranty on all work",
    "Local Florida expertise and knowledge"
  ],
  layout: "list"
};

// Configuraci√≥n de FAQ - DATOS EST√ÅTICOS
const faqConfig = {
  title: `${sub.title || 'Restoration'} FAQs`,
  faqs: [
    { q: "How quickly can you respond?", a: "We provide 24/7 emergency response and typically arrive within 60-90 minutes." },
    { q: "Do you work with insurance?", a: "Yes, we work directly with all major insurance companies and can help with your claim." },
    { q: "Are you licensed and insured?", a: "Yes, we are fully licensed, certified, and insured for your protection." }
  ],
  maxVisible: 6
};

// CTA final
const finalCta = {
  title: "Need Help Now?",
  subtitle: "Our certified technicians are ready to respond 24/7 to protect your Florida property.",
  buttonText: "Get Help Now",
  buttonLink: "/contact"
};
---

<!-- Hero Section -->
<RestoreHero 
  {...heroConfig}
  client:load 
/>

<!-- Process Overview -->
<RestoreProcess 
  {...processConfig}
  client:load 
/>

<!-- Services/What's Included -->
<RestoreServices 
  {...servicesConfig}
  client:load 
/>

<!-- Warning Signs -->
<RestoreWarnings 
  {...warningsConfig}
  client:load 
/>

<!-- Why Choose Us -->
<RestoreFeatures 
  {...featuresConfig}
  client:load 
/>

<!-- FAQ Section -->
<RestoreFAQ 
  {...faqConfig}
  client:load 
/>

<!-- Final CTA -->
<RestorationCTA
  title={finalCta.title}
  subtitle={finalCta.subtitle}
  buttonText={finalCta.buttonText}
  buttonLink={finalCta.buttonLink}
  client:load
/>