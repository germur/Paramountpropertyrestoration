---
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// WaterTemplate.astro - REFACTORED (Data extracted to utilities)
// KEEPS: All styles, components, and structure
// MOVED: Data logic to src/utils/restoration-data.js
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

// import BaseLayout from "../../../layouts/BaseLayout.astro";
import "../../../styles/pages/water-damage.css";
import "../../../styles/pages/restoration-responsive.css";
import "@fortawesome/fontawesome-free/css/all.min.css";
import FAQ from "../../AcordeonServices";
import RestorationCTA from "../../RestorationCTA";
import "../../../styles/global.css";
import { cities } from "../../../data/restoration.js";
import { getAltText } from "../../../data/image-alt-texts.js";
import {
  getCitiesByRegion,
  getWaterDamageContent,
} from "../../../utils/restoration-data.js";

const { group, sub } = Astro.props;

// Data extraction (pure functions from utilities)
const cityRegions = getCitiesByRegion(cities);
const content = getWaterDamageContent(sub?.slug || group.slug);
const faqCategory = `water-${sub?.slug || group.slug}`;
---

<!-- Hero Section -->
<section
  class="hero-section"
  style={`background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(${content.hero.bgImage})`}
  role="img"
  aria-label={getAltText(content.hero.bgImage)}
>
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1>{content.hero.title}</h1>
    <p>{content.hero.description}</p>
    <a href="/contact" class="cta-button">{content.hero.cta} â†’</a>
  </div>
</section>

<!-- Services Grid -->
<section>
  <div class="services-grid">
    {
      content.services.map((service: any) => (
        <a href={service.link} class="service-item-clickable">
          <i class={service.icon} />
          <h3>{service.title}</h3>
        </a>
      ))
    }
  </div>
</section>

<!-- Solutions Cards -->
<section class="solutions-section">
  <div class="container">
    <h2 class="solutions-title">Comprehensive Water Damage Solutions</h2>
    <div class="solutions-grid">
      {
        content.services.map((service: any, _index: any) => (
          <div class="solution-card">
            <div class="card-image">
              <img
                src={service.image}
                alt={`Professional ${service.title.toLowerCase()} restoration services in Florida - 24/7 emergency response`}
                loading="lazy"
              />
            </div>
            <div class="card-content">
              <h3>{service.title}</h3>
              <div class="service-description">
                <p>{service.description}</p>
                <div class="service-features">
                  <span class="feature-tag">ğŸš¨ 24/7 Response</span>
                  <span class="feature-tag">ğŸ’§ Advanced Equipment</span>
                  <span class="feature-tag">ğŸ›¡ï¸ Mold Prevention</span>
                </div>
              </div>
              <a href={service.link || "/contact"} class="btn">
                Get Emergency Water Help â†’
              </a>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<!-- Process Steps -->
<section class="steps-section">
  <h2 class="steps-title">How It Works</h2>
  <div class="steps-container">
    {
      content.steps.map((step: any, index: any) => (
        <div class="step-item" data-step={index + 1}>
          <div class="step-icon">
            <i class={step.icon} />
          </div>
          <h3>{step.title}</h3>
          <p>{step.text}</p>
        </div>
      ))
    }
  </div>
</section>

<!-- Content Deep Section: Understanding the Service -->
<section class="section content-deep">
  <div class="container">
    <h2>Understanding {sub?.title || group.name}</h2>
    <div class="content-grid">
      <div class="content-main">
        <div class="content-block">
          <h3>Warning Signs of {sub?.title || group.name}</h3>
          <p>
            Recognizing {sub?.title || group.name.toLowerCase()} early is crucial
            for preventing extensive property damage. Look for water stains on ceilings
            or walls, musty odors that indicate hidden moisture, warped flooring or
            baseboards, and unexplained increases in your water bill. In Florida's
            humid climate, even small leaks can quickly escalate into major restoration
            projects.
          </p>
          <ul class="warning-signs">
            <li>
              <i class="fas fa-eye"></i> Visible water stains or discoloration
            </li>
            <li><i class="fas fa-nose"></i> Musty or moldy odors</li>
            <li>
              <i class="fas fa-home"></i> Warped floors, walls, or ceilings
            </li>
            <li>
              <i class="fas fa-dollar-sign"></i> Unexplained water bill increases
            </li>
            <li>
              <i class="fas fa-thermometer-half"></i> Increased humidity levels indoors
            </li>
          </ul>
        </div>

        <div class="content-block">
          <h3>Our Detailed {sub?.title || group.name} Restoration Process</h3>
          <p>
            Our certified technicians follow industry standards for {
              sub?.title || group.name.toLowerCase()
            } restoration. We begin with moisture mapping using thermal imaging to
            identify all affected areas, including hidden damage. Our industrial-grade
            equipment removes standing water and moisture from building materials,
            preventing secondary damage like mold growth.
          </p>
          <div class="process-detailed">
            {
              content.steps.map((step: any, index: any) => (
                <div class="process-step-detailed">
                  <div class="step-number">{index + 1}</div>
                  <div class="step-content">
                    <h4>{step.title}</h4>
                    <p>{step.text}</p>
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </div>

      <div class="content-sidebar">
        <div class="trust-indicators">
          <h3>Why Choose Paramount Property Restoration?</h3>
          <ul class="trust-list">
            <li><i class="fas fa-certificate"></i> Certified Technicians</li>
            <li>
              <i class="fas fa-shield-alt"></i> Licensed & Insured in Florida
            </li>
            <li><i class="fas fa-clock"></i> 24/7 Emergency Response</li>
            <li><i class="fas fa-handshake"></i> Direct Insurance Billing</li>
            <li><i class="fas fa-star"></i> 4.9â˜… Customer Rating</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Insurance Assistance Section -->
<section class="section bg-secondary insurance-help">
  <div class="container">
    <h2>Insurance Claims Assistance for {sub?.title || group.name}</h2>
    <div class="insurance-grid">
      <div class="insurance-content">
        <p>
          Dealing with insurance claims for {
            sub?.title || group.name.toLowerCase()
          } can be overwhelming. Our team acts as your advocate throughout the entire
          claims process, ensuring you receive maximum coverage for your restoration
          needs. We document everything thoroughly, communicate directly with adjusters,
          and handle all paperwork to streamline your claim.
        </p>

        <div class="insurance-benefits">
          <div class="benefit-item">
            <i class="fas fa-camera"></i>
            <h4>Professional Documentation</h4>
            <p>
              Detailed photos, moisture readings, and damage reports for your
              claim
            </p>
          </div>
          <div class="benefit-item">
            <i class="fas fa-handshake"></i>
            <h4>Adjuster Coordination</h4>
            <p>We meet with insurance adjusters and provide expert testimony</p>
          </div>
          <div class="benefit-item">
            <i class="fas fa-dollar-sign"></i>
            <h4>Maximize Coverage</h4>
            <p>
              Our experience helps ensure you receive the full compensation you
              deserve
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Unified City Grid Section -->
<section class="section city-grid-section">
  <div class="container">
    <h2>Find Our Local {sub?.title || group.name} Experts Near You</h2>
    <p class="section-subtitle">
      Professional {sub?.title || group.name.toLowerCase()} services available across
      Florida. Click your city for immediate local assistance.
    </p>

    <div class="unified-city-container">
      {
        Object.entries(cityRegions).map(([regionName, cities]) => (
          <div class="unified-region-card">
            <h3 class="unified-region-title">{regionName}</h3>
            <div class="unified-city-pills">
              {(cities as any[]).slice(0, 4).map((city: any) => (
                <a
                  href={
                    sub
                      ? `/restoration/${group.slug}/${sub.slug}/${city.slug}`
                      : `/restoration/${group.slug}/flood-damage/${city.slug}`
                  }
                  class="unified-city-pill"
                >
                  {city.nombre}
                </a>
              ))}
              {(cities as any[]).length > 4 && (
                <span class="unified-more-indicator">
                  +{(cities as any[]).length - 4} more cities available{" "}
                </span>
              )}
            </div>
          </div>
        ))
      }
    </div>

    <div class="emergency-notice">
      <h3>Emergency {sub?.title || group.name} Response</h3>
      <p>
        Don't wait for damage to worsen. Our certified technicians are standing
        by 24/7 to help protect your property.
      </p>
      <a href="tel:+17866022217" class="emergency-phone"
        >Call (786) 602-2217 Now</a
      >
    </div>
  </div>
</section>

<!-- FAQ Section -->
<section>
  <FAQ
    client:load
    category={faqCategory}
    customQuestions={content.faqs.map((faq: any, index: any) => ({
      id: `${faqCategory}-${index}`,
      question: faq.q,
      answer: faq.a,
    }))}
    title="Frequently Asked Questions"
  />
</section>

<!-- Final CTA -->
<RestorationCTA
  client:load
  title="Don't let water damage linger."
  subtitle="Schedule your free assessment nowâ€”restoration starts immediately."
  buttonText="Free Water Damage Assessment"
  buttonLink="/contact"
/>
