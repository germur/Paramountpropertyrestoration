---
import "@fortawesome/fontawesome-free/css/all.min.css";
import FAQ from "../../AcordeonServices";
import RestorationCTA from "../../RestorationCTA";
import "../../../styles/global.css";

const { group, sub } = Astro.props;

// Contenido específico para mitigation services basado en el subservicio
const getMitigationContent = (subSlug) => {
  const mitigationContent = {
    "mitigation-services": {
      hero: {
        title: "Mitigation Services in Florida – Protect Before It Gets Worse",
        description: "Our mitigation services across Florida focus on limiting property loss from water, fire, mold, and storms. By acting fast, we reduce risks, control costs, and keep your home or business safe.",
        cta: "Prevent Further Damage"
      },
      services: [
        { icon: "fas fa-tint", title: "Water Mitigation", description: "Emergency extraction, dehumidification, and moisture control to prevent structural damage and mold growth." },
        { icon: "fas fa-fire", title: "Fire Mitigation", description: "Board-ups, smoke containment, and ventilation strategies to limit secondary damage after a fire." },
        { icon: "fas fa-seedling", title: "Mold Mitigation", description: "Moisture control, air filtration, and antimicrobial treatments to prevent mold from spreading." },
        { icon: "fas fa-cloud-bolt", title: "Storm Mitigation", description: "Roof tarping, window boarding, and debris removal to secure properties before and after severe weather." }
      ],
      faqs: [
        { q: "What are mitigation services?", a: "Mitigation services limit property damage before full restoration begins. This includes water extraction, mold containment, fire board-ups, and storm tarping to prevent further loss." },
        { q: "What is the difference between mitigation and restoration?", a: "Mitigation reduces the impact of damage immediately—like drying water or boarding windows—while restoration repairs and rebuilds the property to pre-loss condition." },
        { q: "Why is mitigation important?", a: "Acting fast with mitigation saves money, reduces risks, and prevents small problems (like leaks or smoke) from becoming major structural issues." },
        { q: "Does insurance cover mitigation?", a: "Most policies cover mitigation services as part of property loss claims, since they are critical to reducing overall damage." }
      ],
      steps: [
        { title: "Inspection & Risk Assessment", text: "Identify threats from water, fire, mold, or storms", icon: "fas fa-search" },
        { title: "Containment & Control", text: "Limit exposure and stop further property loss", icon: "fas fa-shield-alt" },
        { title: "Moisture & Air Quality Management", text: "Use drying, filtration, and antimicrobial methods", icon: "fas fa-wind" },
        { title: "Temporary Protection", text: "Board-ups, tarps, and barriers until full restoration begins", icon: "fas fa-tools" }
      ]
    },
    "water-mitigation": {
      hero: {
        title: "Water Damage Mitigation Services in Florida",
        description: "Water damage mitigation focuses on stopping the spread of water before it causes permanent structural issues or mold growth. Unlike restoration (which repairs after the damage), mitigation is the first and most critical step to protect your Florida property from further loss.",
        cta: "Start Water Mitigation Now"
      },
      services: [
        { icon: "fas fa-search", title: "Emergency Inspection & Moisture Mapping", description: "Detect visible + hidden water." },
        { icon: "fas fa-tint", title: "Rapid Water Extraction", description: "Pumps & wet vacs remove standing water fast." },
        { icon: "fas fa-wind", title: "Industrial Drying & Dehumidification", description: "Stabilize humidity with pro gear." },
        { icon: "fas fa-spray-can", title: "Antimicrobial Treatment", description: "Stop mold & bacteria before they spread." }
      ],
      faqs: [
        { q: "What is water damage mitigation vs restoration?", a: "Mitigation = stop further damage (extraction, drying, stabilization). Restoration = repairs & rebuild. Both are essential." },
        { q: "Can I do water mitigation myself?", a: "Minor spills = yes. Floods, roof leaks, or burst pipes = need industrial drying to avoid mold & structural weakening." },
        { q: "How long does water mitigation take?", a: "Usually 1–3 days, depending on severity. Large floods may require longer with daily monitoring." },
        { q: "Does insurance cover water mitigation?", a: "Yes—most policies cover mitigation since it reduces total claim costs. We provide full documentation for insurers." }
      ],
      steps: [
        { title: "Emergency Inspection & Moisture Mapping", text: "Detect visible + hidden water", icon: "fas fa-search" },
        { title: "Rapid Water Extraction", text: "Pumps & wet vacs remove standing water fast", icon: "fas fa-tint" },
        { title: "Industrial Drying & Dehumidification", text: "Stabilize humidity with pro gear", icon: "fas fa-wind" },
        { title: "Antimicrobial Treatment", text: "Stop mold & bacteria before they spread", icon: "fas fa-spray-can" },
        { title: "Ongoing Monitoring", text: "Daily checks until property is fully dry", icon: "fas fa-chart-line" }
      ]
    },
    "fire-mitigation": {
      hero: {
        title: "Fire Damage Mitigation Services in Florida",
        description: "After a fire, the damage doesn't end when the flames are out. Smoke, soot, and structural instability keep spreading harm. Fire damage mitigation focuses on securing, containing, and stabilizing your property to prevent further loss—while restoration repairs and rebuilds later.",
        cta: "Secure My Property Now"
      },
      services: [
        { icon: "fas fa-window-maximize", title: "Emergency Board-Up & Tarping", description: "Seal windows, doors & roofs against further water." },
        { icon: "fas fa-wind", title: "Smoke & Soot Containment", description: "Isolate affected areas to stop spread." },
        { icon: "fas fa-air-freshener", title: "Ventilation & Air Scrubbing", description: "HEPA filters + negative air machines." },
        { icon: "fas fa-box", title: "Protection of Belongings", description: "Salvage & store safe items." }
      ],
      faqs: [
        { q: "What is fire damage mitigation?", a: "It's the process of securing & stabilizing a property after a fire—board-ups, smoke containment, ventilation." },
        { q: "Why is fire mitigation important?", a: "Without mitigation, soot spreads, odors become permanent, and structures weaken—making restoration harder & costlier." },
        { q: "What's the difference between fire mitigation and restoration?", a: "Mitigation = prevention of further damage. Restoration = rebuild to pre-loss condition." },
        { q: "How fast should fire mitigation start?", a: "Immediately. The first 24 hours are critical." }
      ],
      steps: [
        { title: "Emergency Board-Up & Tarping", text: "Secure windows, doors, roofs", icon: "fas fa-hammer" },
        { title: "Smoke & Soot Containment", text: "Isolate affected areas to stop spread", icon: "fas fa-shield-alt" },
        { title: "Ventilation & Air Scrubbing", text: "HEPA filters + negative air machines", icon: "fas fa-wind" },
        { title: "Protection of Belongings", text: "Salvage & store safe items", icon: "fas fa-box" },
        { title: "Moisture Control from Firefighting", text: "Drying to prevent mold", icon: "fas fa-tint" }
      ]
    },
    "mold-mitigation": {
      hero: {
        title: "Mold Mitigation Services in Florida",
        description: "Mold mitigation is about prevention and containment—stopping mold from spreading, controlling humidity, and protecting your property until full remediation can safely remove it. Unlike remediation, which eliminates colonies, mitigation is the first line of defense against contamination and health risks.",
        cta: "Stop Mold Spread Today"
      },
      services: [
        { icon: "fas fa-search", title: "Inspection & Moisture Assessment", description: "Detect leaks, water damage & humidity." },
        { icon: "fas fa-shield-alt", title: "Containment of Affected Areas", description: "Plastic barriers + negative air pressure." },
        { icon: "fas fa-wind", title: "HEPA Air Filtration", description: "Capture airborne spores with high-efficiency systems." },
        { icon: "fas fa-spray-can", title: "Antimicrobial & Preventive Treatment", description: "Apply eco-safe treatments to surfaces." }
      ],
      faqs: [
        { q: "What is mold mitigation?", a: "It's the process of containing mold, improving air quality, and controlling moisture before remediation begins." },
        { q: "Does mold mitigation remove mold?", a: "No—mitigation prevents spread, but remediation removes colonies permanently." },
        { q: "Why is mold mitigation important?", a: "It protects health, limits property damage, and reduces remediation costs." },
        { q: "How long does mitigation take?", a: "Usually 1–3 days, depending on moisture and area size." }
      ],
      steps: [
        { title: "Inspection & Moisture Assessment", text: "Detect leaks, water damage & humidity", icon: "fas fa-search" },
        { title: "Containment of Affected Areas", text: "Plastic barriers + negative air pressure", icon: "fas fa-shield-alt" },
        { title: "HEPA Air Filtration", text: "Capture airborne spores with high-efficiency systems", icon: "fas fa-wind" },
        { title: "Antimicrobial & Preventive Treatment", text: "Apply eco-safe treatments to surfaces", icon: "fas fa-spray-can" },
        { title: "Moisture Control & Monitoring", text: "Industrial dehumidifiers + continuous checks", icon: "fas fa-tint" }
      ]
    },
    "storm-mitigation": {
      hero: {
        title: "Storm Damage Mitigation Services in Florida",
        description: "Storms and hurricanes don't just cause immediate destruction—they leave homes and businesses exposed to secondary damage like flooding, mold, and structural collapse. Storm mitigation focuses on securing and stabilizing your property right after impact.",
        cta: "Request Storm Mitigation Now"
      },
      services: [
        { icon: "fas fa-window-maximize", title: "Emergency Board-Up & Roof Tarping", description: "Seal windows, doors & roofs against further water." },
        { icon: "fas fa-tree", title: "Debris & Tree Removal", description: "Clear dangerous debris, fallen trees, and damaged structures." },
        { icon: "fas fa-tint", title: "Water Intrusion Control", description: "Extract standing water, dry interiors, apply antimicrobials." },
        { icon: "fas fa-tools", title: "Structural Stabilization", description: "Shore up walls, ceilings, and framing until restoration starts." }
      ],
      faqs: [
        { q: "What is storm damage mitigation?", a: "It's securing & stabilizing a property after a storm—tarping roofs, boarding windows, removing debris." },
        { q: "Why is storm mitigation important?", a: "Without it, rain, debris & humidity cause higher repair costs & safety risks." },
        { q: "What's the difference between storm mitigation & restoration?", a: "Mitigation = prevent more damage. Restoration = repair & rebuild." },
        { q: "How fast should storm mitigation start?", a: "Immediately after the storm clears. The sooner it's secured, the less secondary damage occurs." }
      ],
      steps: [
        { title: "Emergency Board-Up & Roof Tarping", text: "Seal windows, doors & roofs against further water", icon: "fas fa-window-maximize" },
        { title: "Debris & Tree Removal", text: "Clear dangerous debris, fallen trees, and damaged structures", icon: "fas fa-tree" },
        { title: "Water Intrusion Control", text: "Extract standing water, dry interiors, apply antimicrobials", icon: "fas fa-tint" },
        { title: "Structural Stabilization", text: "Shore up walls, ceilings, and framing until restoration starts", icon: "fas fa-tools" }
      ]
    }
  };

  return mitigationContent[subSlug] || mitigationContent["water-mitigation"];
};

const content = getMitigationContent(sub.slug);
const faqCategory = `mitigation-${sub.slug}`;

---

<!-- Hero Section -->
<section class="hero-section">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1>{content.hero.title}</h1>
    <p>{content.hero.description}</p>
    <a href="/contact" class="cta-button">{content.hero.cta} →</a>
  </div>
</section>

<!-- Services Grid -->
<section>
  <div class="services-grid">
    {content.services.map((service) => (
      <div class="service-item">
        <i class={service.icon}></i>
        <h3>{service.title}</h3>
      </div>
    ))}
  </div>
</section>

<!-- Solutions Cards -->
<section class="solutions-section">
  <h2 class="solutions-title">Comprehensive Storm Damage Solutions</h2>
  <div class="solutions-grid">
    {content.services.map((service, index) => (
      <div class="solution-card">
        <div class="card-image">
          <img src="/images/mitigation.jpg" alt={service.title} />
        </div>
        <div class="card-content">
          <h3>{service.title}</h3>
          <p>{service.description}</p>
          <a href="/contact" class="btn">Get Help Now</a>
        </div>
      </div>
    ))}
  </div>
</section>

<!-- Process Steps -->
<section class="steps-section">
  <h2 class="steps-title">How It Works</h2>
  <div class="steps-container">
    {content.steps.map((step, index) => (
      <div class="step-item" data-step={index + 1}>
        <div class="step-icon">
          <i class={step.icon}></i>
        </div>
        <h3>{step.title}</h3>
        <p>{step.text}</p>
      </div>
    ))}
  </div>
</section>

<!-- FAQ Section -->
<section>
  <FAQ client:load category={faqCategory} customQuestions={content.faqs.map((faq, index) => ({
    id: `${faqCategory}-${index}`,
    question: faq.q,
    answer: faq.a
  }))} title="Frequently Asked Questions" />
</section>

<!-- Final CTA -->
<RestorationCTA
  client:load
  title="Don't leave your home exposed after a storm."
  subtitle="Call now for 24/7 storm mitigation services in Florida."
  buttonText="Repair Storm Damage Today"
  buttonLink="/contact"
/>