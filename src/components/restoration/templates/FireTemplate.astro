---
import "../../../styles/pages/fire-damage.css";
import "@fortawesome/fontawesome-free/css/all.min.css";
import FAQ from "../../AcordeonServices";
import RestorationCTA from "../../RestorationCTA";
import "../../../styles/global.css";
import { cities } from "../../../data/restoration.js";

const { group, sub } = Astro.props;

// Dynamic city grid for Level 4 distribution
const getCitiesByRegion = () => {
  const regions = {};
  cities.forEach(city => {
    if (!regions[city.region]) {
      regions[city.region] = [];
    }
    regions[city.region].push(city);
  });
  return regions;
};

const cityRegions = getCitiesByRegion();

// Contenido específico para fire damage basado en el subservicio
const getFireContent = (subSlug) => {
  const fireContent = {
    "fire-damage": {
      hero: {
        title: "Fire Damage Restoration Services in Florida",
        description: "We provide 24/7 fire and smoke damage restoration across Florida. From emergency board-up to soot removal and full repairs, our team restores homes and businesses to safe, pre-loss condition.",
        cta: "Clean Up After Fire",
        bgImage: "/images/herofire.jpg"
      },
      services: [
        { 
          icon: "fas fa-fire", 
          title: "Smoke Damage", 
          description: "Professional smoke removal and odor elimination", 
          slug: "smoke-damage", 
          image: "/images/SmokeDamage.jpg",
          link: "/restoration/fire-damage/smoke-damage"
        },
        { 
          icon: "fas fa-fire", 
          title: "Soot Cleanup", 
          description: "Safe soot removal from all surfaces", 
          slug: "soot-cleanup", 
          image: "/images/SootCleanup.jpg",
          link: "/restoration/fire-damage/soot-cleanup"
        },
        { 
          icon: "fas fa-fire", 
          title: "Fire Damage Repair", 
          description: "Complete fire damage restoration", 
          slug: "fire-damage-repair", 
          image: "/images/FireDamageRepair.jpg",
          link: "/restoration/fire-damage/fire-damage-repair"
        },
        { 
          icon: "fas fa-fire", 
          title: "Emergency Fire Response", 
          description: "24/7 emergency fire response", 
          slug: "emergency-fire-response", 
          image: "/images/EmergencyFireResponse.jpg",
          link: "/restoration/fire-damage/emergency-fire-response"
        }
      ],
      faqs: [
        { q: "How to restore fire damage?", a: "Fire damage restoration involves soot cleanup, smoke odor removal, and structural repairs. Professionals handle debris removal, deep cleaning, and rebuilding to return the property to pre-loss condition." },
        { q: "What is the meaning of fire damage restoration?", a: "It's the process of cleaning, repairing, and restoring a property after fire or smoke damage, ensuring safety and habitability." },
        { q: "How to remove soot and smoke damage?", a: "Professionals use HEPA vacuums, chemical sponges, and deodorizing treatments to safely remove soot and smoke particles from surfaces and air systems." },
        { q: "Can you paint over smoke or soot?", a: "Painting over soot is not recommended. Proper cleaning and sealing are required first to prevent stains and odors from returning." },
        { q: "How long does fire damage restoration take?", a: "Fire damage restoration typically takes 1-2 weeks for minor damage, and 4-6 weeks for extensive damage. Timeline depends on damage severity, size of affected area, and insurance approval process." },
        { q: "What should I do immediately after a house fire?", a: "Contact your insurance company, secure the property with emergency board-up services, avoid entering unsafe areas, and call professional fire restoration specialists to prevent further damage." }
      ],
      steps: [
        { title: "Emergency Response & Board-Up", text: "Secure the property immediately after the fire", icon: "fas fa-fire" },
        { title: "Soot & Smoke Removal", text: "Clean affected areas with advanced tools and techniques", icon: "fas fa-fire" },
        { title: "Odor Treatment", text: "Deodorize air, walls, and belongings for a safe living space", icon: "fas fa-fire" },
        { title: "Repairs & Restoration", text: "Rebuild damaged structures and restore finishes", icon: "fas fa-fire" }
      ]
    },
    "smoke-damage": {
      hero: {
        title: "Breathe Easy Again After Smoke Damage",
        description: "When smoke invades your property, the damage goes beyond stains and odors—it impacts your health and safety. Our certified Florida restoration teams provide 24/7 smoke cleanup, soot removal, odor elimination, and surface repairs.",
        cta: "Request Smoke Damage Help Now",
        bgImage: "/images/fireDamage.jpg"
      },
      services: [
        { 
          icon: "fas fa-fire", 
          title: "Soot & Residue Removal", 
          description: "Remove acidic soot before it corrodes surfaces", 
          image: "/images/SootCleanup.jpg",
          link: "/restoration/fire-damage/soot-cleanup"
        },
        { 
          icon: "fas fa-fire", 
          title: "Odor Elimination", 
          description: "Advanced deodorization with ozone & hydroxyl machines", 
          image: "/images/SmokeDamage.jpg",
          link: "/restoration/fire-damage/odor-elimination"
        },
        { 
          icon: "fas fa-fire", 
          title: "Furniture & Fabric Restoration", 
          description: "Upholstery, carpets & curtains saved from smoke absorption", 
          image: "/images/fireDamage.jpg",
          link: "/restoration/fire-damage/furniture-restoration"
        },
        { 
          icon: "fas fa-fire", 
          title: "Structural Cleaning", 
          description: "Ceilings, walls & HVAC fully decontaminated", 
          image: "/images/FireDamageRepair.jpg",
          link: "/restoration/fire-damage/structural-cleaning"
        }
      ],
      faqs: [
        { q: "Can smoke damage be fully removed?", a: "Yes. With professional cleaning and deodorization, odors and particles can be eliminated." },
        { q: "How long does it take to clean smoke damage?", a: "Minor jobs: 1–2 days. Severe smoke with deep odors: up to a week." },
        { q: "Is smoke damage dangerous?", a: "Yes. Smoke contains toxic particles that may trigger allergies, asthma, and respiratory issues." },
        { q: "Does insurance cover smoke damage?", a: "Most Florida homeowners' policies cover it. We provide full documentation for claims." }
      ],
      steps: [
        { title: "Assessment & Air Quality Testing", text: "Identify contamination and affected zones", icon: "fas fa-fire" },
        { title: "Emergency Soot & Debris Removal", text: "Prevent permanent staining and corrosion", icon: "fas fa-fire" },
        { title: "Odor Neutralization", text: "HEPA filters, ozone & hydroxyl treatments", icon: "fas fa-fire" },
        { title: "Deep Cleaning & Sanitization", text: "Walls, furniture, fabrics fully restored", icon: "fas fa-fire" },
        { title: "Final Repairs & Quality Check", text: "Structural fixes + guaranteed clean air", icon: "fas fa-fire" }
      ]
    },
    "soot-cleanup": {
      hero: {
        title: "Soot Cleanup Services Across Florida",
        description: "After a fire, soot and smoke residue can spread fast—coating walls, ceilings, furniture, and even air ducts. Our Florida soot cleanup teams respond 24/7 to remove hazardous particles, neutralize odors, and restore your property safely.",
        cta: "Request Soot Cleanup Now",
        bgImage: "/images/fireDamage.jpg"
      },
      services: [
        { 
          icon: "fas fa-fire", 
          title: "Wall & Ceiling Soot Removal", 
          description: "Clean stains safely without damaging paint or drywall.", 
          image: "/images/SootCleanup.jpg",
          link: "/restoration/fire-damage/wall-ceiling-cleanup"
        },
        { 
          icon: "fas fa-fire", 
          title: "Furniture & Upholstery Cleanup", 
          description: "Restore salvageable sofas, chairs & fabrics.", 
          image: "/images/fireDamage.jpg",
          link: "/restoration/fire-damage/furniture-restoration"
        },
        { 
          icon: "fas fa-fire", 
          title: "Air Duct & Vent Cleaning", 
          description: "Remove hidden soot and restore safe indoor air.", 
          image: "/images/FireDamageRepair.jpg",
          link: "/restoration/fire-damage/air-duct-cleaning"
        },
        { 
          icon: "fas fa-fire", 
          title: "Odor Control Solutions", 
          description: "Advanced ozone & hydroxyl treatments to neutralize smells.", 
          image: "/images/SmokeDamage.jpg",
          link: "/restoration/fire-damage/odor-elimination"
        }
      ],
      faqs: [
        { q: "What is soot cleanup?", a: "It's the removal of smoke residue after a fire, including cleaning, deodorizing, and restoring surfaces." },
        { q: "Can I clean soot myself?", a: "Small spots can be wiped, but DIY often spreads residue. Professionals ensure full and safe removal." },
        { q: "Is soot dangerous?", a: "Yes. Soot contains toxic particles that irritate lungs and corrode surfaces if untreated." },
        { q: "How fast should soot be cleaned?", a: "Immediately. Delays cause permanent staining and higher repair costs." }
      ],
      steps: [
        { title: "Inspection & Assessment", text: "Identify soot-affected areas and damage levels", icon: "fas fa-fire" },
        { title: "Containment & Safety", text: "Seal clean areas to stop residue from spreading", icon: "fas fa-fire" },
        { title: "Deep Cleaning & Removal", text: "HEPA vacuums, dry sponges & chemical cleaners for surfaces", icon: "fas fa-fire" },
        { title: "Odor Neutralization", text: "Ozone treatment & thermal fogging to remove smoke smells", icon: "fas fa-fire" },
        { title: "Final Restoration", text: "Refinish walls, ceilings, and furniture back to pre-fire condition", icon: "fas fa-fire" }
      ]
    },
    "fire-damage-repair": {
      hero: {
        title: "Fire Damage Restoration Services in Florida",
        description: "We provide 24/7 fire and smoke damage restoration across Florida. From emergency board-up to soot removal and full repairs, our team restores homes and businesses to safe, pre-loss condition.",
        cta: "Clean Up After Fire",
        bgImage: "/images/fireDamage.jpg"
      },
      services: [
        { 
          icon: "fas fa-fire", 
          title: "Smoke Damage Cleanup", 
          description: "Remove smoke particles and odors from walls, ceilings, and furniture with professional cleaning and deodorizing methods.", 
          image: "/images/SmokeDamage.jpg",
          link: "/restoration/fire-damage/smoke-damage"
        },
        { 
          icon: "fas fa-fire", 
          title: "Soot Removal", 
          description: "Safe cleanup of soot from surfaces, HVAC systems, and personal belongings to prevent long-term damage.", 
          image: "/images/SootCleanup.jpg",
          link: "/restoration/fire-damage/soot-cleanup"
        },
        { 
          icon: "fas fa-fire", 
          title: "Fire Structural Repair", 
          description: "Repair and replace fire-damaged drywall, insulation, flooring, and framing to restore property integrity.", 
          image: "/images/FireDamageRepair.jpg",
          link: "/restoration/fire-damage/structural-repair"
        },
        { 
          icon: "fas fa-fire", 
          title: "Emergency Board-Up", 
          description: "Secure broken windows, doors, and openings after a fire to prevent further damage or theft.", 
          image: "/images/EmergencyFireResponse.jpg",
          link: "/restoration/fire-damage/emergency-fire-response"
        }
      ],
      faqs: [
        { q: "How to restore fire damage?", a: "Fire damage restoration involves soot cleanup, smoke odor removal, and structural repairs. Professionals handle debris removal, deep cleaning, and rebuilding to return the property to pre-loss condition." },
        { q: "What is the meaning of fire damage restoration?", a: "It's the process of cleaning, repairing, and restoring a property after fire or smoke damage, ensuring safety and habitability." },
        { q: "How to remove soot and smoke damage?", a: "Professionals use HEPA vacuums, chemical sponges, and deodorizing treatments to safely remove soot and smoke particles from surfaces and air systems." },
        { q: "Can you paint over smoke or soot?", a: "Painting over soot is not recommended. Proper cleaning and sealing are required first to prevent stains and odors from returning." },
        { q: "How long does fire damage restoration take?", a: "Fire damage restoration typically takes 1-2 weeks for minor damage, and 4-6 weeks for extensive damage. Timeline depends on damage severity, size of affected area, and insurance approval process." },
        { q: "What should I do immediately after a house fire?", a: "Contact your insurance company, secure the property with emergency board-up services, avoid entering unsafe areas, and call professional fire restoration specialists to prevent further damage." }
      ],
      steps: [
        { title: "Emergency Response & Board-Up", text: "Secure the property immediately after the fire", icon: "fas fa-fire" },
        { title: "Soot & Smoke Removal", text: "Clean affected areas with advanced tools and techniques", icon: "fas fa-fire" },
        { title: "Odor Treatment", text: "Deodorize air, walls, and belongings for a safe living space", icon: "fas fa-fire" },
        { title: "Repairs & Restoration", text: "Rebuild damaged structures and restore finishes", icon: "fas fa-fire" }
      ]
    },
    "emergency-fire-response": {
      hero: {
        title: "24/7 Emergency Fire Response in Florida",
        description: "When fire strikes, every second counts. Our emergency fire response teams provide immediate board-up, smoke containment, and damage assessment to protect your property and begin the restoration process.",
        cta: "Get Emergency Fire Help",
        bgImage: "/images/fireDamage.jpg"
      },
      services: [
        { 
          icon: "fas fa-fire", 
          title: "Emergency Board-Up", 
          description: "Immediate securing of windows, doors, and openings.", 
          image: "/images/EmergencyFireResponse.jpg",
          link: "/restoration/fire-damage/board-up-services"
        },
        { 
          icon: "fas fa-fire", 
          title: "Smoke Containment", 
          description: "Prevent smoke from spreading to unaffected areas.", 
          image: "/images/SmokeDamage.jpg",
          link: "/restoration/fire-damage/smoke-containment"
        },
        { 
          icon: "fas fa-fire", 
          title: "Damage Assessment", 
          description: "Complete evaluation for insurance and restoration planning.", 
          image: "/images/FireDamageRepair.jpg",
          link: "/restoration/fire-damage/damage-assessment"
        },
        { 
          icon: "fas fa-fire", 
          title: "24/7 Response Team", 
          description: "Always available for immediate emergency response.", 
          image: "/images/EmergencyFireResponse.jpg",
          link: "/contact"
        }
      ],
      faqs: [
        { q: "What is emergency fire response?", a: "It's immediate action after a fire to secure the property, assess damage, and begin the restoration process." },
        { q: "How fast can emergency fire teams respond?", a: "Our teams mobilize within hours, available 24/7 across Florida." },
        { q: "What should I do while waiting for emergency fire response?", a: "Stay safe, avoid entering damaged areas, and document damages for your insurance claim." },
        { q: "Does insurance cover emergency fire response?", a: "Yes, most policies cover emergency services like board-up and damage assessment after a fire." }
      ],
      steps: [
        { title: "Emergency Call Response", text: "Immediate dispatch of certified fire response team", icon: "fas fa-fire" },
        { title: "Property Securing", text: "Board-up and tarping to prevent further damage", icon: "fas fa-fire" },
        { title: "Safety Assessment", text: "Evaluate structural integrity and safety hazards", icon: "fas fa-fire" },
        { title: "Restoration Planning", text: "Develop comprehensive restoration plan", icon: "fas fa-fire" }
      ]
    }
  };

  return fireContent[subSlug] || fireContent["fire-damage-repair"];
};

const content = getFireContent(sub?.slug || group.slug);
const faqCategory = `fire-${sub?.slug || group.slug}`;
---

<!-- Hero Section -->
<section class="hero-section" style={`background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(${content.hero.bgImage})`}>
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1>{content.hero.title}</h1>
    <p>{content.hero.description}</p>
    <a href="/contact" class="cta-button">{content.hero.cta} →</a>
  </div>
</section>

<!-- Services Grid -->
<section>
  <div class="services-grid">
    {content.services.map((service) => (
      <a href={service.link} class="service-item-clickable">
        <i class={service.icon}></i>
        <h3>{service.title}</h3>
      </a>
    ))}
  </div>
</section>

<!-- Solutions Cards - ENLACES CORREGIDOS -->
<section class="solutions-section">
  <div class="container">
  <h2 class="solutions-title">Comprehensive Fire Damage Solutions</h2>
  <div class="solutions-grid">
    {content.services.map((service, index) => (
      <div class="solution-card">
        <div class="card-image">
          <img src={service.image} alt={`Professional ${service.title.toLowerCase()} restoration services in Florida - smoke and soot cleanup experts`} loading="lazy" />
        </div>
        <div class="card-content">
          <h3>{service.title}</h3>
          <div class="service-description">
            <p>{service.description}</p>
            <div class="service-features">
              <span class="feature-tag">🔥 Fire Certified</span>
              <span class="feature-tag">🌬️ Odor Removal</span>
              <span class="feature-tag">🧹 Complete Cleanup</span>
            </div>
          </div>
          <!-- CAMBIO AQUÍ: Usar service.link en lugar de /contact -->
          <a href={service.link || "/contact"} class="btn">Get Fire Damage Help Now →</a>
        </div>
      </div>
    ))}
  </div>
  </div>
</section>

<!-- Process Steps -->
<section class="steps-section">
  <h2 class="steps-title">How It Works</h2>
  <div class="steps-container">
    {content.steps.map((step, index) => (
      <div class="step-item" data-step={index + 1}>
        <div class="step-icon">
          <i class={step.icon}></i>
        </div>
        <h3>{step.title}</h3>
        <p>{step.text}</p>
      </div>
    ))}
  </div>
</section>

<!-- Content Deep Section: Understanding the Service -->
<section class="section content-deep">
  <div class="container">
    <h2>Understanding {sub?.title || group.name}</h2>
    <div class="content-grid">
      <div class="content-main">
        <div class="content-block">
          <h3>Warning Signs of {sub?.title || group.name}</h3>
          <p>Fire damage extends far beyond what's visible to the eye. Smoke particles can penetrate walls, fabrics, and HVAC systems, creating long-term health risks and structural problems. Early professional intervention is critical for preventing permanent damage and ensuring safe restoration in Florida's climate.</p>
          <ul class="warning-signs">
            <li><i class="fas fa-fire"></i> Visible burn marks or charring</li>
            <li><i class="fas fa-smog"></i> Persistent smoke or acrid odors</li>
            <li><i class="fas fa-eye"></i> Soot stains on walls and ceilings</li>
            <li><i class="fas fa-home"></i> Warped or discolored surfaces</li>
            <li><i class="fas fa-wind"></i> Smoke residue in air vents</li>
          </ul>
        </div>
        
        <div class="content-block">
          <h3>Our Detailed {sub?.title || group.name} Restoration Process</h3>
          <p>Our IICRC-certified fire damage restoration specialists follow proven protocols for complete property recovery. We use advanced equipment and techniques to remove smoke particles, eliminate odors, and restore your property to pre-loss condition, ensuring all safety standards are met.</p>
          <div class="process-detailed">
            {content.steps.map((step, index) => (
              <div class="process-step-detailed">
                <div class="step-number">{index + 1}</div>
                <div class="step-content">
                  <h4>{step.title}</h4>
                  <p>{step.text}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
      
      <div class="content-sidebar">
        <div class="trust-indicators">
          <h3>Why Choose Paramount Property Restoration?</h3>
          <ul class="trust-list">
            <li><i class="fas fa-certificate"></i> IICRC Certified Technicians</li>
            <li><i class="fas fa-shield-alt"></i> Licensed & Insured in Florida</li>
            <li><i class="fas fa-clock"></i> 24/7 Emergency Response</li>
            <li><i class="fas fa-handshake"></i> Direct Insurance Billing</li>
            <li><i class="fas fa-fire-extinguisher"></i> Fire Damage Specialists</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Insurance Assistance Section -->
<section class="section bg-secondary insurance-help">
  <div class="container">
    <h2>Fire Damage Insurance Claims Support</h2>
    <div class="insurance-grid">
      <div class="insurance-content">
        <p>Fire damage claims require extensive documentation and expert knowledge of insurance processes. Our team specializes in documenting fire and smoke damage thoroughly, coordinating with adjusters, and ensuring you receive maximum compensation for your restoration needs.</p>
        
        <div class="insurance-benefits">
          <div class="benefit-item">
            <i class="fas fa-camera"></i>
            <h4>Comprehensive Documentation</h4>
            <p>Detailed fire damage reports with photos and assessments for your claim</p>
          </div>
          <div class="benefit-item">
            <i class="fas fa-handshake"></i>
            <h4>Adjuster Meetings</h4>
            <p>We represent your interests during insurance inspections and evaluations</p>
          </div>
          <div class="benefit-item">
            <i class="fas fa-dollar-sign"></i>
            <h4>Maximize Your Settlement</h4>
            <p>Our expertise helps ensure all fire damage is properly covered</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Unified City Grid Section -->
<section class="section city-grid-section">
  <div class="container">
    <h2>Find Our Local {sub?.title || group.name} Experts Near You</h2>
    <p class="section-subtitle">Professional {sub?.title || group.name.toLowerCase()} services available across Florida. Click your city for immediate local assistance.</p>
    
    <div class="unified-city-container">
      {Object.entries(cityRegions).map(([regionName, cities]) => (
        <div class="unified-region-card">
          <h3 class="unified-region-title">{regionName}</h3>
          <div class="unified-city-pills">
            {cities.slice(0, 4).map(city => (
              <a href={sub ? `/restoration/${group.slug}/${sub.slug}/${city.slug}` : `/restoration/${group.slug}/fire-damage-repair/${city.slug}`} class="unified-city-pill">
                {city.nombre}
              </a>
            ))}
            {cities.length > 4 && (
              <span class="unified-more-indicator">
                +{cities.length - 4} more
              </span>
            )}
          </div>
        </div>
      ))}
    </div>

    <div class="emergency-notice">
      <h3>Emergency {sub?.title || group.name} Response</h3>
      <p>Don't wait for damage to worsen. Our certified technicians are standing by 24/7 to help protect your property.</p>
      <a href="tel:+17866022217" class="emergency-phone">Call (786) 602-2217 Now</a>
    </div>
  </div>
</section>

<!-- FAQ Section -->
<section>
  <FAQ client:load category={faqCategory} customQuestions={content.faqs.map((faq, index) => ({
    id: `${faqCategory}-${index}`,
    question: faq.q,
    answer: faq.a
  }))} title="Frequently Asked Questions" />
</section>

<!-- Final CTA -->
<RestorationCTA
  client:load
  title="Don't wait after a fire—damage spreads quickly."
  subtitle="Call now for 24/7 fire damage restoration in Florida."
  buttonText="Clean Up After Fire"
  buttonLink="/contact"
/>