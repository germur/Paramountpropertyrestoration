[build]
  publish = "dist"
  command = "npm run build"

[build.environment]
  NODE_VERSION = "18"

[[forms]]
  name = "contact"

[[forms]]
  name = "emergency-request"
  # Configure notifications
  [[forms.notifications]]
    type = "email"
    to = "services@paramountpropertyrestoration.com"
    subject = "ðŸš¨ Emergency Service Request - {{ form.city }}"
    body = """
    NEW EMERGENCY REQUEST:
    
    Name: {{ form.name }}
    Phone: {{ form.phone }}
    Service: {{ form.service }}
    City: {{ form.city }}
    Description: {{ form.description }}
    
    Timestamp: {{ form.created_at }}
    """

[[forms]]
  name = "mold-landing"
  # Configure notifications
  [[forms.notifications]]
    type = "email"
    to = "services@paramountpropertyrestoration.com"
    subject = "ðŸš¨ Mold Landing - Free Claim Consultation Request"
    body = """
    NEW MOLD LANDING LEAD:
    
    Name: {{ form.name }}
    Phone: {{ form.phone }}
    Message: {{ form.message }}
    
    Timestamp: {{ form.created_at }}
    """

# Redirects and headers for SEO
[[redirects]]
  from = "/services/*"
  to = "/services/:splat"
  status = 301

[[redirects]]  
  from = "/restoration/*"
  to = "/restoration/:splat"
  status = 301

# Headers for better performance
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"

[[headers]]
  for = "*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

[[headers]]
  for = "*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

[[headers]]
  for = "*.png"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

[[headers]]
  for = "*.jpg"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

[[headers]]
  for = "*.jpeg"
  [headers.values]
    Cache-Control = "public, max-age=31536000"

[[headers]]
  for = "*.webp"
  [headers.values]
    Cache-Control = "public, max-age=31536000"